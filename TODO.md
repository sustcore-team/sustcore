# TODO List

## 必要的改进

1. 修改内存分配器的算法。目前算法为简单的线性增长分配器。然而该算法并不会回收内存, 导致随着时间推移, 分配器的内存使用量不断增加。对新算法的期望:
   1. 支持内存回收, 以减少内存使用量。
   2. 彻底取代旧的分配器。
   3. 从 GFP (Page Frame Allocator) 中分配内存。
该分配器与Slab等分配器不同, 分配的内存大小是动态变化的, 需要支持任意大小的内存分配请求。
2. 修改 GFP 的算法。目前GFP分配页框的方式是简单的不断分配下一个空闲页框。然而该算法并不会回收页框, 导致随着时间推移, GFP的内存使用量不断增加。对新算法的期望:
   1. 支持页框回收, 以减少内存使用量。
   2. 彻底取代旧的GFP算法。
   3. 使用Slab分配器来分配管理对象, 以提高运行效率。
需要注意的是。GFP进行内存管理需要分配相应的管理对象, 然而这些管理对象的分配器又需要从GFP中分配内存。处理方法应当是由GFP从内存中预先分配一块内存区域, 从中构造一个初始的Cache交由KOA(Kernel Object Allocator)管理, 并保证在初次扫描阶段时, 不需要构造新的Cache, 抑或是需要构造新的Cache时, 能够从已经处理好的Cache中分配内存。